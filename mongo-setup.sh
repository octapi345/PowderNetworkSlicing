#!/bin/bash
sudo apt-get update
sudo apt-get upgrade -y
### This is the script for installing the mongodb and tshark services
### Mongodb Install
curl -fsSL https://pgp.mongodb.com/server-7.0.asc | \
   sudo gpg -o /usr/share/keyrings/mongodb-server-7.0.gpg \
   --dearmor
echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/7.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list
sudo apt-get install -y mongodb

sudo cp -v /local/repository/dbconfig.txt /etc/mongodb.config

### Mongosh Install
wget -qO- https://www.mongodb.org/static/pgp/server-7.0.asc | sudo tee /etc/apt/trusted.gpg.d/server-7.0.asc
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/7.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list
sudo apt-get update
sudo apt-get install -y mongodb-mongosh

### Install tshark (Wireshark)
#sudo apt-get install -y tshark
### Install python
sudo apt install -y python3-pip
python -m pip install pymongo


sudo systemctl enable mongodb
sudo systemctl start mongodb
